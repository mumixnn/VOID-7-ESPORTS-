<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Performance Graph | VOID 7 ESPORTS</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- Zoom / Pan plugin for swipe & pinch -->
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.1.1/dist/chartjs-plugin-zoom.min.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  min-height: 100vh;
  background: radial-gradient(circle at top, #2b0000 0%, #000 70%);
  color: #fff;
}

.page {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  padding: 24px 14px 30px;
}

h1 {
  text-align: center;
  color: #ff0000;
  font-size: 32px;
  margin-bottom: 6px;
}

.subtitle {
  text-align: center;
  color: #bbb;
  font-size: 14px;
  margin-bottom: 22px;
}

.graph-card {
  background: linear-gradient(180deg, rgba(255,0,0,0.12), rgba(0,0,0,0.95));
  border-radius: 22px;
  padding: 18px;
  box-shadow: 0 0 35px rgba(255,0,0,0.35);
  overflow-x: auto; /* horizontal scroll if needed */
}

.graph-wrapper {
  position: relative;
  width: 100%;
  height: 280px;
}

canvas {
  width: 100% !important;
  height: 100% !important;
}

.flex-fill {
  flex: 1;
}

.back-btn {
  margin: 28px auto 0;
  padding: 14px 52px;
  font-size: 18px;
  font-weight: bold;
  color: #fff;
  border: none;
  border-radius: 16px;
  background: linear-gradient(145deg, #ff0000, #b00000);
  box-shadow: 0 0 22px rgba(255,0,0,0.6);
  cursor: pointer;
}
.back-btn:active {
  transform: scale(0.96);
}
</style>
</head>
<body>

<div class="page">
  <h1>PERFORMANCE GRAPH</h1>
  <div class="subtitle">Overall scrims standing</div>

  <div class="graph-card">
    <div class="graph-wrapper">
      <canvas id="performanceChart"></canvas>
    </div>
  </div>

  <div class="flex-fill"></div>

  <button class="back-btn" onclick="history.back()">Back</button>
</div>

<!-- Hidden scrim data copied from scrim-history.html -->
<div id="scrim-data" style="display:none">
  <div class="scrim" data-date="29 Jan 2026" data-standing="04"></div>
  <div class="scrim" data-date="28 Jan 2026" data-standing="08"></div>
  <div class="scrim" data-date="27 Jan 2026" data-standing="07"></div>
  <div class="scrim" data-date="25 Jan 2026" data-standing="22"></div>
  <div class="scrim" data-date="24 Jan 2026" data-standing="07"></div>
  <div class="scrim" data-date="24 Jan 2026" data-standing="11"></div>
  <div class="scrim" data-date="23 Jan 2026" data-standing="02"></div>
  <div class="scrim" data-date="22 Jan 2026" data-standing="05"></div>
  <div class="scrim" data-date="22 Jan 2026" data-standing="12"></div>
  <div class="scrim" data-date="21 Jan 2026" data-standing="14"></div>
  <div class="scrim" data-date="20 Jan 2026" data-standing="14"></div>
  <div class="scrim" data-date="19 Jan 2026" data-standing="9"></div>
  <div class="scrim" data-date="18 Jan 2026" data-standing="10"></div>
  <div class="scrim" data-date="17 Jan 2026" data-standing="5"></div>
  <div class="scrim" data-date="16 Jan 2026" data-standing="15"></div>
  <div class="scrim" data-date="15 Jan 2026" data-standing="16"></div>
  <div class="scrim" data-date="13 Jan 2026" data-standing="1"></div>
</div>

<script>
/* ===== READ SCRIM DATA DYNAMICALLY ===== */
const scrimElements = document.querySelectorAll('#scrim-data .scrim');
const SCRIM_HISTORY = Array.from(scrimElements)
  .map(el => ({
    date: el.dataset.date,
    standing: parseInt(el.dataset.standing)
  }))
  // Sort by date if needed
  .sort((a,b) => new Date(a.date) - new Date(b.date));

const labels = SCRIM_HISTORY.map(s => s.date);
const standings = SCRIM_HISTORY.map(s => s.standing);

/* ===== CREATE CHART ===== */
const ctx = document.getElementById('performanceChart').getContext('2d');

const chart = new Chart(ctx, {
  type: 'line',
  data: {
    labels,
    datasets: [{
      data: standings,
      borderColor: "#ff2a2a",
      backgroundColor: "rgba(255,0,0,0.15)",
      tension: 0.3,
      borderWidth: 3,
      pointRadius: 6,
      pointBackgroundColor: "#fff",
      pointBorderColor: "#ff0000",
      fill: false
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { display: false },
      zoom: {
        pan: {
          enabled: true,
          mode: 'x',
          overScaleMode: 'x',
        },
        zoom: {
          wheel: { enabled: true },
          pinch: { enabled: true },
          mode: 'x'
        }
      },
      tooltip: {
        backgroundColor: "#000",
        titleColor: "#fff",
        bodyColor: "#fff"
      }
    },
    scales: {
      y: {
        reverse: true,
        min: 1,
        max: 24,
        ticks: { stepSize: 5, color:"#ccc" },
        grid: { color:"rgba(255,255,255,0.1)" }
      },
      x: {
        ticks: { color:"#ccc" },
        grid: { display:false }
      }
    }
  }
});
</script>

</body>
</html>
